# B站视频摘要助手测试

## 测试用例

### 1. 视频链接提取测试

#### 测试场景：B站普通视频页面
- **测试URL**: https://www.bilibili.com/video/BV1xx411c7mD
- **预期结果**: 
  - 正确提取视频标题
  - 正确提取BV号
  - 正确提取视频时长
  - 正确提取封面图片

#### 测试场景：B站番剧页面
- **测试URL**: https://www.bilibili.com/bangumi/play/ss12345
- **预期结果**: 
  - 正确识别番剧页面
  - 提取番剧标题和集数信息

#### 测试场景：B站直播回放页面
- **测试URL**: https://live.bilibili.com/record/R12345
- **预期结果**: 
  - 正确识别直播回放页面
  - 提取直播间标题和回放信息

### 2. 大模型交互测试

#### 测试场景：API连接测试
- **测试步骤**:
  1. 配置正确的API密钥
  2. 点击"测试连接"按钮
- **预期结果**: 显示连接成功

#### 测试场景：摘要生成测试
- **测试步骤**:
  1. 打开B站视频页面
  2. 点击插件图标
  3. 点击"生成摘要"按钮
- **预期结果**: 
  - 显示加载状态
  - 成功生成视频摘要
  - 显示分段分析结果

### 3. 配置管理测试

#### 测试场景：配置保存测试
- **测试步骤**:
  1. 进入设置页面
  2. 填写base_url和API密钥
  3. 点击保存配置
- **预期结果**: 配置成功保存，重启插件后配置仍然存在

#### 测试场景：配置验证测试
- **测试步骤**:
  1. 输入无效的API密钥
  2. 点击测试连接
- **预期结果**: 显示连接失败错误

### 4. 用户界面测试

#### 测试场景：响应式布局测试
- **测试环境**: 不同尺寸的浏览器窗口
- **预期结果**: 界面元素正常显示，无布局错乱

#### 测试场景：状态显示测试
- **测试步骤**:
  1. 观察不同状态下的界面显示
  2. 检查加载状态、错误状态、成功状态
- **预期结果**: 各状态显示正确，用户反馈清晰

### 5. 性能测试

#### 测试场景：并发处理测试
- **测试步骤**: 快速多次点击生成摘要按钮
- **预期结果**: 正确处理并发请求，无重复提交

#### 测试场景：缓存测试
- **测试步骤**:
  1. 生成一个视频的摘要
  2. 重新打开同一视频页面
  3. 检查是否显示之前的摘要结果
- **预期结果**: 正确显示缓存的摘要结果

## 测试环境要求

- Chrome浏览器 (版本 ≥ 88)
- 网络连接正常
- 有效的API密钥

## 测试数据

### 测试视频推荐
1. 教育类视频 - 测试摘要准确性
2. 娱乐类视频 - 测试内容多样性处理
3. 技术类视频 - 测试专业术语处理

### 测试配置
```json
{
  "baseUrl": "https://api.openai.com",
  "apiKey": "sk-test-key",
  "model": "gpt-4-vision-preview"
}
```